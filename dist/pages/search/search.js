"use strict";(wx["webpackJsonp"]=wx["webpackJsonp"]||[]).push([[36],{8460:function(e,n,t){var a=t(7036),r=t(1054),o=t(8037),c=t(9501),s=t(1517),i=t(5234),l=t(2484),u=t(5271),h=t(8966),d=t(2247),f=t(6553),g=t.n(f),m=t(2676);function x(){var e=(0,u.useState)({keyword:"",tagId:0}),n=(0,i.Z)(e,2),t=n[0],a=n[1],f=function(){console.log("Clearing..."),a({keyword:"",tagId:0})},x=function(){t.keyword&&q(t.keyword),console.log("Searching for:",t)},y=(0,u.useState)([]),w=(0,i.Z)(y,2),k=w[0],p=w[1],j=function(){var e=(0,s.Z)((0,c.Z)().mark((function e(){var n,t;return(0,c.Z)().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,(0,d.fz)();case 2:n=e.sent,t=n.data.filter((function(e){return 1===e.isHot})),p(t);case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();(0,u.useEffect)((function(){console.log(t,"queryParams"),t.keyword&&q(t.keyword),j()}),[t]);var v=(0,u.useState)(""),S=(0,i.Z)(v,2),Z=S[0],N=S[1],G=function(e){console.log(e,"value"),N(e)},b=function(){var e=Z;e&&a((0,o.Z)((0,o.Z)({},t),{},{keyword:e})),N("")},C=function(e){console.log(e,"item\u70b9\u51fb\u6807\u7b7e"),a((function(n){return(0,o.Z)((0,o.Z)({},n),{},{keyword:e.title,tagId:e.pkId})}))},I=(0,u.useState)(g().getStorageSync("historySearch")||["aaa","bbb"]),T=(0,i.Z)(I,2),B=T[0],P=T[1],q=function(e){P((0,r.Z)(new Set([].concat((0,r.Z)(B),[e]))).slice(0,10)),g().setStorageSync("historySearch",B),console.log(t,"queryParams"),g().navigateTo({url:"/pages/searchResult/searchResult?keyword=".concat(t.keyword,"&tagId=").concat(t.tagId)}),f()},O=function(){g().showModal({title:"\u662f\u5426\u6e05\u7a7a\u5386\u53f2\u641c\u7d22\uff1f",success:function(e){e.confirm&&(g().removeStorageSync("historySearch"),P([]))}})},R=function(e){console.log(e,"tab"),a((0,o.Z)((0,o.Z)({},t),{},{keyword:e})),console.log(t,"queryParams")};return(0,m.jsxs)(l.G7,{className:"searchLayout",children:[(0,m.jsx)(l.G7,{className:"search",children:(0,m.jsx)(h.wp,{fixed:!0,actionName:"\u641c\u7d22\u4e00\u4e0b",placeholder:"\u8bf7\u8f93\u5165\u4f60\u60f3\u8981\u641c\u7d22\u7684\u8d44\u6e90",value:Z,onConfirm:x,onActionClick:x,onClear:f,onChange:function(e){return G(e)},onBlur:b})}),(0,m.jsx)(l.G7,{className:"history",children:k.length>0&&(0,m.jsxs)(m.Fragment,{children:[(0,m.jsx)(l.G7,{className:"topTitle",children:(0,m.jsx)(l.G7,{className:"text",children:"\u70ed\u95e8\u6807\u7b7e"})}),(0,m.jsx)(l.G7,{className:"tabs",children:k.map((function(e){return(0,m.jsx)(l.G7,{className:"tab",onClick:function(){return C(e)},children:e.title},e.pkId)}))})]})}),(0,m.jsx)(l.G7,{className:"history",children:B.length>0&&(0,m.jsxs)(m.Fragment,{children:[(0,m.jsxs)(l.G7,{className:"topTitle",children:[(0,m.jsx)(l.G7,{className:"text",children:"\u6700\u8fd1\u641c\u7d22"}),(0,m.jsx)(l.G7,{className:"icon",onClick:O,children:(0,m.jsx)(h.lO,{value:"trash",size:"25"})})]}),(0,m.jsx)(l.G7,{className:"tabs",children:B.map((function(e){return(0,m.jsx)(l.G7,{className:"tab",onClick:function(){return R(e)},children:e},e)}))})]})})]})}var y={navigationBarTitleText:"\u641c\u7d22",navigationBarTextStyle:"white",navigationBarBackgroundColor:"#000000"};Page((0,a.R4)(x,"pages/search/search",{root:{cn:[]}},y||{}))}},function(e){var n=function(n){return e(e.s=n)};e.O(0,[107,216,592],(function(){return n(8460)}));e.O()}]);