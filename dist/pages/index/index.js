"use strict";(wx["webpackJsonp"]=wx["webpackJsonp"]||[]).push([[539],{7396:function(e,t,n){var s=n(7036),r=n(9501),a=n(1517),c=n(5234),i=n(2484),o=n(5271),l=n(9574),u=(n(4694),n(2676)),p=function(e){var t=e.noticeList;return(0,u.jsxs)(i.G7,{className:"notice",style:{display:t.length?"flex":"none"},children:[(0,u.jsxs)(i.G7,{className:"left",children:[(0,u.jsx)(i.xv,{className:" at-icon at-icon-bell",style:{fontSize:"16px",color:"#1296db"}}),(0,u.jsx)(i.xv,{className:"text",children:"\u516c\u544a"})]}),(0,u.jsx)(i.G7,{className:"center",children:(0,u.jsx)(i.tq,{vertical:!0,autoplay:!0,interval:3e3,duration:1500,circular:!0,children:t.map((function(e){return(0,u.jsx)(i.t3,{children:(0,u.jsx)(i.C3,{className:"noticeItem",url:"/pages/noticeDetail/noticeDetail?id=".concat(e.pkId),children:e.title})},e.pkId)}))})}),(0,u.jsx)(i.C3,{url:"/pages/notice/notice",className:"right",children:(0,u.jsx)(i.xv,{className:"icon-right at-icon chevron-right",style:{fontSize:"16px",color:"#333"}})})]})},d=p,x=function(e){var t=e.swiperList,n=(0,o.useState)(0),s=(0,c.Z)(n,2),r=s[0],a=s[1],l=function(e){a(e.detail.current)};return(0,u.jsxs)(i.G7,{className:"carousel",style:{display:0!==t.length?"flex":"none"},children:[(0,u.jsx)(i.tq,{autoplay:!0,circular:!0,interval:3e3,onChange:l,className:"swiper",children:t.map((function(e){return(0,u.jsx)(i.t3,{children:(0,u.jsx)(i.C3,{url:"/pages/noticeDetail/noticeDetail?id=".concat(e.pkId),className:"navigator",children:(0,u.jsx)(i.Ee,{mode:"aspectFill",className:"image",src:e.cover})})},e.pkId)}))}),(0,u.jsx)(i.G7,{className:"indicator",children:t.map((function(e,t){return(0,u.jsx)(i.xv,{className:"dot ".concat(t===r?"active":"")},e.pkId)}))})]})},f=x,h=n(6553),m=n.n(h),v=function(){var e=m().getSystemInfoSync().safeArea,t=function(){m().navigateTo({url:"/pages/search/search"})};return(0,u.jsxs)(i.G7,{className:"navbar",style:{paddingTop:e.top+10+"px"},children:[(0,u.jsx)(i.G7,{className:"logo",children:(0,u.jsx)(i.xv,{className:"logo-text",children:"\u8d44\u6e90\u5206\u4eab\u5e94\u7528"})}),(0,u.jsxs)(i.G7,{className:"search",onClick:t,children:[(0,u.jsx)(i.xv,{className:"icon-search",children:"\u8bf7\u8f93\u5165\u4f60\u60f3\u8981\u641c\u7d22\u7684\u8d44\u6e90"}),(0,u.jsx)(i.xv,{className:"icon-scan"})]})]})},g=v,j=function(){var e=(0,o.useState)([{title:"\u767e\u5ea6\u7f51\u76d8",diskType:1,img:"https://nd-static.bdstatic.com/m-static/wp-brand/favicon.ico"},{title:"\u963f\u91cc\u7f51\u76d8",diskType:2,img:"https://img.alicdn.com/imgextra/i1/O1CN01JDQCi21Dc8EfbRwvF_!!6000000000236-73-tps-64-64.ico"},{title:"\u5938\u514b\u7f51\u76d8",diskType:3,img:"https://image.quark.cn/s/uae/g/3o/broccoli/resource/202304/c62b4840-e344-11ed-93c7-392f83c2aa26.png"},{title:"\u5929\u7ffc\u7f51\u76d8",diskType:4,img:"https://cloud.189.cn/web/logo.ico"}]),t=(0,c.Z)(e,1),n=t[0];return(0,u.jsx)(i.G7,{className:"category",children:n.map((function(e){return(0,u.jsxs)(i.C3,{className:"category-item",hoverClass:"none",url:"/pages/searchResult/searchResult?diskType=".concat(e.diskType),children:[(0,u.jsx)(i.Ee,{className:"icon",src:e.img}),(0,u.jsx)(i.xv,{className:"text",children:e.title})]},e.diskType)}))})},k=j,w=n(8037),y=n(1054),N=n(2734),Z=n(2247),T=n(1469),I=(0,o.forwardRef)((function(e,t){var n=(0,o.useState)({resType:0,page:1,limit:10}),s=(0,c.Z)(n,2),l=s[0],p=s[1],d=(0,o.useState)({list:[],total:0}),x=(0,c.Z)(d,2),f=x[0],h=x[1],v=(0,o.useRef)(!1),g=function(){var e=(0,a.Z)((0,r.Z)().mark((function e(t){var n;return(0,r.Z)().wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(!v.current){e.next=3;break}return m().showToast({icon:"none",title:"\u6ca1\u6709\u66f4\u591a\u6570\u636e~"}),e.abrupt("return");case 3:return e.next=5,(0,T._)(t||l);case 5:n=e.sent,h((function(e){return{total:n.data.total,list:[].concat((0,y.Z)(e.list),(0,y.Z)(n.data.list))}})),f.list.length>=n.data.total&&(v.current=!0),p((function(e){return(0,w.Z)((0,w.Z)({},e),{},{page:e.page+1})}));case 9:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),j=function(){p({resType:0,page:1,limit:10}),h({list:[],total:0}),v.current=!1};(0,o.useEffect)((function(){g()}),[]),(0,o.useEffect)((function(){R()}),[]);var k=function(e){j(),p((function(t){var n=(0,w.Z)((0,w.Z)({},t),{},{resType:e,page:1});return g(n),n}))},I=(0,o.useState)([{pkId:1,title:"\u52a8\u6f2b\u533a"},{pkId:2,title:"\u5b66\u4e60\u533a"},{pkId:3,title:"\u6444\u5f71\u533a"},{pkId:4,title:"\u5168\u6808\u533a"}]),b=(0,c.Z)(I,2),S=b[0],D=b[1],R=function(){var e=(0,a.Z)((0,r.Z)().mark((function e(){var t,n;return(0,r.Z)().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,(0,Z.AT)();case 2:t=e.sent,0===t.code&&(n=t.data.filter((function(e){return 1===e.type})).slice(0,8),D([{title:"\u63a8\u8350",pkId:0,type:0}].concat((0,y.Z)(n))));case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();(0,o.useImperativeHandle)(t,(function(){return{resetData:j,getIndexResourceListData:g}}));var G=(0,o.useState)({author:"AHang",authorAvatar:"https://public-cdn-oss.mosoteach.cn / avatar / 2021 / 91 / 125cc0794c06f55ec6628339b4baee63.jpg ? v = 1615285685 & x - oss -process=style/ s300x300",collectNum:100,createTime:"2024-03-14",diskType:"CD",downloadNum:50,isTop:1,likeNum:75,pkId:123,price:10.99,resType:["music","video"],tags:["rock","pop"],title:"Example Resource",detail:"This is an example resource.",isDownload:!0,downloadUrl:"https://example.com/download",isLike:!0,isCollect:!1,isExchange:!1}),C=(0,c.Z)(G,2);C[0],C[1];return(0,u.jsxs)(i.G7,{className:"resourceList",children:[(0,u.jsx)(i.pf,{scrollX:!0,className:"scroll-view",scrollWithAnimation:!0,children:S.map((function(e){return(0,u.jsx)(i.G7,{className:"scroll-view-item ".concat(l.resType===e.pkId?"active":""),onClick:function(){return k(e.pkId)},children:e.title},e.pkId)}))}),f.list.map((function(e,t){return(0,u.jsx)(N.Z,{resource:e},t)})),(0,u.jsx)(i.G7,{className:"loading-text",children:v.current?"\u6ca1\u6709\u66f4\u591a\u6570\u636e~":"\u6b63\u5728\u52a0\u8f7d..."})]})})),b=I;function S(){var e=(0,o.useState)([]),t=(0,c.Z)(e,2),n=t[0],s=t[1],p=(0,o.useState)([]),x=(0,c.Z)(p,2),h=x[0],m=x[1],v=function(){var e=(0,a.Z)((0,r.Z)().mark((function e(){var t;return(0,r.Z)().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,(0,l.TZ)();case 2:t=e.sent,0===t.code&&s(t.data);case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),j=function(){var e=(0,a.Z)((0,r.Z)().mark((function e(){var t;return(0,r.Z)().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,(0,l.No)();case 2:t=e.sent,0===t.code&&m(t.data);case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();(0,o.useEffect)((function(){v(),j()}),[]);var w=(0,o.useRef)(null),y=(0,o.useState)(!1),N=(0,c.Z)(y,2),Z=N[0],T=N[1],I=function(){var e=(0,a.Z)((0,r.Z)().mark((function e(){return(0,r.Z)().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return T(!0),w.current&&w.current.resetData(),e.next=4,Promise.all([j(),v()]);case 4:w.current&&w.current.getIndexResourceListData(),T(!1);case 6:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),S=function(){w.current&&w.current.getIndexResourceListData()};return(0,u.jsxs)(i.G7,{className:"index",children:[(0,u.jsx)(g,{}),(0,u.jsxs)(i.pf,{enableBackToTop:!0,refresherEnabled:!0,refresherTriggered:Z,onRefresherRefresh:I,onScrollToLower:S,className:"scrollView",scrollY:!0,children:[(0,u.jsx)(d,{noticeList:n}),(0,u.jsx)(f,{swiperList:h}),(0,u.jsx)(k,{}),(0,u.jsx)(b,{ref:w})]})]})}var D={navigationBarTitleText:"\u9996\u9875",navigationStyle:"custom",enablePullDownRefresh:!0};Page((0,s.R4)(S,"pages/index/index",{root:{cn:[]}},D||{}))}},function(e){var t=function(t){return e(e.s=t)};e.O(0,[107,216,592],(function(){return t(7396)}));e.O()}]);