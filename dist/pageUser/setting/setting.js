"use strict";(wx["webpackJsonp"]=wx["webpackJsonp"]||[]).push([[767],{1687:function(e,n,t){var s=t(7036),r=t(8037),a=t(9501),c=t(1517),o=t(5234),i=t(7146),l=t(2484),u=t(6553),h=t.n(u),p=t(5433),x=t(5271),d=t(8966),m=t(1738),f=t(5834);function w(){var e=(0,x.useState)(60),n=(0,o.Z)(e,2),t=n[0],s=n[1],r=(0,x.useState)(!1),i=(0,o.Z)(r,2),l=i[0],u=i[1],d=(0,x.useState)({phone:"",code:""}),m=(0,o.Z)(d,2),w=m[0],v=m[1];(0,x.useEffect)((function(){var e;return l&&(e=setInterval((function(){s((function(n){return 1===n?(clearInterval(e),u(!1),60):n-1}))}),1e3)),function(){return clearInterval(e)}}),[l]);var j=function(){var e=(0,c.Z)((0,a.Z)().mark((function e(){var n;return(0,a.Z)().wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(!w.phone||!(0,p.J)(w.phone)){e.next=8;break}return u(!0),e.next=4,(0,f.Z3)(w.phone);case 4:n=e.sent,0===n.code?h().showToast({title:"\u9a8c\u8bc1\u7801\u53d1\u9001\u6210\u529f",icon:"none"}):h().showToast({title:"\u9a8c\u8bc1\u7801\u53d1\u9001\u5931\u8d25",icon:"none"}),e.next=9;break;case 8:h().showToast({title:"\u8bf7\u8f93\u5165\u6b63\u786e\u7684\u9a8c\u8bc1\u7801",icon:"none"});case 9:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return{count:t,timer:l,phoneForm:w,setPhoneForm:v,sendPhoneCode:j}}var v=t(2676);function j(){var e=w(),n=e.phoneForm,t=e.count,s=e.timer,u=e.sendPhoneCode,j=e.setPhoneForm,N=(0,i.CG)((function(e){return e.user.userInfo})),k=(0,i.TL)(),b=(0,x.useState)(!1),g=(0,o.Z)(b,2),Z=g[0],G=g[1],T=function(){G(!0)},I=function(){G(!1)},z=function(){h().showModal({title:"\u4f60\u786e\u5b9a\u8981\u9000\u51fa\u5417\uff1f",success:function(){var e=(0,c.Z)((0,a.Z)().mark((function e(n){var t;return(0,a.Z)().wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(!n.confirm){e.next=5;break}return e.next=3,(0,f.kS)();case 3:t=e.sent,0===t.code&&(k((0,m.wp)({})),h().removeStorageSync("token"),h().showToast({title:"\u9000\u51fa\u767b\u5f55\u6210\u529f"}),h().reLaunch({url:"/pages/login/login"}));case 5:case"end":return e.stop()}}),e)})));function n(n){return e.apply(this,arguments)}return n}()})},y=function(){var e=(0,c.Z)((0,a.Z)().mark((function e(){var t;return(0,a.Z)().wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(n.phone&&(0,p.J)(n.phone)){e.next=3;break}return h().showToast({title:"\u8bf7\u8f93\u5165\u6b63\u786e\u7684\u624b\u673a\u53f7\u7801",icon:"none"}),e.abrupt("return");case 3:if(n.code&&(0,p.L)(n.code)){e.next=6;break}return h().showToast({title:"\u8bf7\u8f93\u5165\u6b63\u786e\u7684\u9a8c\u8bc1\u7801",icon:"none"}),e.abrupt("return");case 6:return e.next=8,(0,f.Qz)(n.phone,n.code);case 8:if(t=e.sent,0!==t.code){e.next=16;break}h().showToast({title:"\u64cd\u4f5c\u6210\u529f",icon:"success"}),I(),k((0,m.wp)({})),h().reLaunch({url:"/pages/login/login"}),e.next=18;break;case 16:return h().showToast({title:t.msg,icon:"none"}),e.abrupt("return");case 18:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return(0,v.jsxs)(v.Fragment,{children:[(0,v.jsxs)(l.G7,{className:"setting",children:[N&&(0,v.jsxs)(l.G7,{className:"list",children:[(0,v.jsx)(l.zx,{className:"item arrow",onClick:function(){return h().navigateTo({url:"/pageUser/userInfo/userInfo"})},children:"\u4e2a\u4eba\u8d44\u6599"}),(0,v.jsx)(l.zx,{className:"item arrow",onClick:T,children:"\u7ed1\u5b9a\u624b\u673a\u53f7"})]}),(0,v.jsxs)(l.G7,{className:"list",children:[(0,v.jsx)(l.zx,{className:"item arrow",openType:"openSetting",children:"\u9690\u79c1\u7ba1\u7406"}),(0,v.jsx)(l.zx,{className:"item arrow",openType:"contact",children:"\u8054\u7cfb\u6211\u4eec"}),(0,v.jsx)(l.zx,{className:"item arrow",openType:"feedback",children:"\u95ee\u9898\u53cd\u9988"})]}),(0,v.jsx)(l.G7,{className:"list",children:(0,v.jsx)(l.zx,{className:"item arrow",children:"\u5173\u4e8e\u6211\u4eec"})}),N.pkId>=0&&(0,v.jsx)(l.G7,{className:"action",children:(0,v.jsx)(l.zx,{className:"button",onClick:z,children:"\u9000\u51fa\u767b\u5f55"})})]}),(0,v.jsx)(d.Lb,{className:"nikeNamePopup",isOpened:Z,children:(0,v.jsx)(l.G7,{className:"phonePopup",children:(0,v.jsxs)(l.G7,{className:"container",children:[(0,v.jsxs)(l.G7,{className:"popHeader",children:[(0,v.jsx)(l.G7,{}),(0,v.jsx)(l.G7,{className:"title",children:"\u7ed1\u5b9a\u624b\u673a"}),(0,v.jsx)(l.G7,{className:"close",onClick:I,children:(0,v.jsx)(d.lO,{value:"close",size:"18",color:"#999"})})]}),(0,v.jsxs)(l.G7,{className:"content",children:[(0,v.jsx)(l.II,{className:"input",type:"text",placeholder:"\u8bf7\u8f93\u5165\u624b\u673a\u53f7\u7801",value:n.phone,onInput:function(e){return j((function(n){return(0,r.Z)((0,r.Z)({},n),{},{phone:e.detail.value})}))}}),(0,v.jsxs)(l.G7,{className:"yanz",children:[(0,v.jsx)(l.II,{className:"password",type:"text",placeholder:"\u8bf7\u8f93\u5165\u9a8c\u8bc1\u7801",value:n.code,onInput:function(e){return j((function(n){return(0,r.Z)((0,r.Z)({},n),{},{code:e.detail.value})}))}}),s?(0,v.jsxs)(l.xv,{className:"btn",hidden:!s,children:[t,"\u79d2\u540e\u91cd\u65b0\u83b7\u53d6"]}):(0,v.jsx)(l.xv,{className:"btn",onClick:u,hidden:s,children:"\u83b7\u53d6\u9a8c\u8bc1\u7801"})]})]}),(0,v.jsx)(l.G7,{className:"footer",children:(0,v.jsx)(l.zx,{className:"button",onClick:y,children:"\u786e\u8ba4\u7ed1\u5b9a"})})]})})})]})}var N={navigationBarTitleText:"\u8bbe\u7f6e"};Page((0,s.R4)(j,"pageUser/setting/setting",{root:{cn:[]}},N||{}))}},function(e){var n=function(n){return e(e.s=n)};e.O(0,[107,216,592],(function(){return n(1687)}));e.O()}]);